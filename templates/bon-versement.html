<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>Bon de Versement {{ document.numero }}</title>
    <style>
        @page { size: A4; margin: 2cm; }
        body { font-family: Arial, sans-serif; font-size: 12px; line-height: 1.4; color: #333; }
        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; border-bottom: 1px solid #ddd; padding-bottom: 20px; }
        .logo { max-width: 150px; max-height: 80px; }
        .document-title { font-size: 20px; font-weight: bold; text-align: right; }
        .info-section { display: flex; justify-content: space-between; margin: 20px 0; }
        .info-box { width: 45%; }
        .info-title { font-weight: bold; margin-bottom: 5px; border-bottom: 1px solid #ddd; padding-bottom: 2px; }
        .table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        .table th, .table td { border: 1px solid #ddd; padding: 8px; text-align: left; }
        .table th { background-color: #f5f5f5; font-weight: bold; }
        .table td.number { text-align: right; }
        .table td.center { text-align: center; }
        .footer { margin-top: 30px; text-align: center; font-size: 10px; color: #666; }
        .signatures { display: flex; justify-content: space-between; margin-top: 60px; }
        .signature-box { width: 200px; text-align: center; }
        .signature-line { border-top: 1px solid #333; margin-top: 50px; padding-top: 5px; font-size: 10px; }
    </style>
</head>
<body>
    <!-- Header with Logo -->
    <div class="header">
        <div>
            {% if logo_url %}
            <img src="{{ logo_url }}" alt="Logo" class="logo">
            {% else %}
            <img src="https://cdn.bellat.net/img/LogoFR.png" alt="Logo" class="logo">
            {% endif %}
        </div>
        <div class="document-title">
            BON DE VERSEMENT<br>
            <span style="font-size: 14px; font-weight: normal;">N° {{ document.numero }}</span>
        </div>
    </div>
    <!-- Company and Client Info -->
    <div class="info-section">
        <div class="info-box">
            <div class="info-title">VERSEUR</div>
            <strong>{{ client.nom }}</strong><br>
            {{ client.adresse }}<br>
            {% if client.telephone %}Tél: {{ client.telephone }}<br>{% endif %}
        </div>
        <div class="info-box">
            <div class="info-title">BÉNÉFICIAIRE</div>
            <strong>{{ company.raisonSociale }}</strong><br>
            {{ company.adresse }}<br>
            Tél: {{ company.telephone }}<br>
            {% if company.email %}Email: {{ company.email }}<br>{% endif %}
        </div>
    </div>
    <!-- Payment Details -->
    <div style="margin: 20px 0;">
        <strong>Date de versement:</strong> {{ document.date | date }}
        {% if document.modePaiement %} | <strong>Mode de paiement:</strong> {{ document.modePaiement }}{% endif %}
        {% if document.reference %} | <strong>Référence:</strong> {{ document.reference }}{% endif %}
    </div>
    <!-- Amount Table -->
    <table class="table">
        <thead>
            <tr>
                <th style="width: 60%;">Libellé</th>
                <th style="width: 20%;">Montant</th>
                <th style="width: 20%;">Observation</th>
            </tr>
        </thead>
        <tbody>
            {% for payment in payments %}
            <tr>
                <td>{{ payment.label }}</td>
                <td class="number">{{ payment.amount | currency }}</td>
                <td>{{ payment.observation or '' }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div style="text-align:right; margin-top:10px; font-size:13px;">
        <strong>Total versé :</strong> {{ total_versement | currency }} DA
    </div>
    <!-- Signatures -->
    <div class="signatures">
        <div class="signature-box">
            <div class="signature-line">Signature du verseur</div>
        </div>
        <div class="signature-box">
            <div class="signature-line">Signature du bénéficiaire</div>
        </div>
    </div>
    <!-- Footer -->
    <div class="footer">
        Document généré le {{ generated_date }}
    </div>
</body>
</html>